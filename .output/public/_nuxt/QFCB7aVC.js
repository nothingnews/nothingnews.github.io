import{H as D,r as C,d as y,u as M,o as G,t as m,I as f,v as c,J as k,K as b,L as P,B as _,M as w,y as h,_ as V,h as z,N as T,j as B,O as $,A as p,z as v,P as I,Q as j,R as J,x as S,S as Y}from"./Bh29DUYA.js";import{u as O,a as Q,_ as U,b as K,c as W}from"./tRDdju1_.js";import{t as X}from"./BuHx7o6n.js";const E="data:image/svg+xml,%3csvg%20fill='%23000000'%20height='20'%20width='20'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20489%20489'%20xml:space='preserve'%20%3e%3cg%3e%3cg%3e%3cpath%20d='M454.3,31.6c-28.5-15.3-59.1-23.4-93.7-23.4c-40.7,0-81.5,11.2-120.2,21.4S166,50,130.4,50c-23.8,0-45.3-4.6-65.2-13.7%20V20.4C65.2,9.2,56,0,44.8,0S24.4,9.2,24.4,20.4v448.2c0,11.2,9.2,20.4,20.4,20.4s20.4-9.2,20.4-20.4v-148%20c20,6.9,41.2,10.5,64.2,10.5c40.7,0,81.5-11.2,120.2-20.4c38.7-10.2,74.4-20.4,110-20.4c27.5,0,52,6.1,74.4,18.3%20c12.7,8.7,30.6-2.1,30.6-17.3V49.9C464.4,41.8,460.4,35.7,454.3,31.6z%20M423.7,258.8c-20.4-7.1-41.8-10.2-64.2-10.2%20c-40.7,0-81.5,11.2-120.2,21.4s-74.4,20.4-110,20.4c-23.4,0-44.8-4.1-64.2-13.2V79.5c20.4,7.1,41.8,10.2,64.2,10.2%20c40.7,0,81.5-11.2,120.2-21.4s74.4-20.4,110-20.4c23.4,0,44.8,4.1,64.2,13.2V258.8z'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Z="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%2019H12.01M8.21704%207.69689C8.75753%206.12753%2010.2471%205%2012%205C14.2091%205%2016%206.79086%2016%209C16%2010.6565%2014.9931%2012.0778%2013.558%2012.6852C12.8172%2012.9988%2012.4468%2013.1556%2012.3172%2013.2767C12.1629%2013.4209%2012.1336%2013.4651%2012.061%2013.6634C12%2013.8299%2012%2014.0866%2012%2014.6L12%2016'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3c/svg%3e",N=(r,t)=>Array.from({length:r},()=>Array.from({length:t},()=>({}))),ee=(r,t,e)=>{const[a,n]=t;a>=0&&a<e[0]&&n>=0&&n<e[1]&&r[a][n].value>-1&&r[a][n].value++},F=r=>{const[t,e]=r;return[[t-1,e],[t+1,e],[t,e-1],[t,e+1],[t+1,e+1],[t-1,e-1],[t+1,e-1],[t-1,e+1]]},te=(r,t)=>{const{size:e,mines:a}=r,n=N(e[0],e[1]);n.forEach((i,s)=>{i.forEach((o,u)=>{n[s][u].value=0,n[s][u].isOpen=!1,n[s][u].status=null})});const l=new Set;for(;l.size<a;){const i=Math.floor(Math.random()*e[0]),s=Math.floor(Math.random()*e[1]),[o,u]=t,g=F([i,s]);let A=!1;g.forEach(L=>{const[R,q]=L;(R===o&&q===u||i===o&&s===u)&&(A=!0)}),!A&&l.add(JSON.stringify([i,s]))}const d=Array.from(l,i=>JSON.parse(i));for(const i of d){const[s,o]=i;n[s][o].value=-1,F(i).forEach(g=>ee(n,g,e))}return n},x=D("gameStore",()=>{const r=C(0),t=C([]),e=C("ready"),a=C({value:0,interval:null,stop:function(){this.interval&&clearInterval(this.interval)},init:function(){this.reset(),this.interval=setInterval(()=>{this.value+=1},1e3)},reset:function(){this.stop(),this.value=0}});function n(o){e.value=o}function l(o){r.value=o}function d(o){t.value=o}function i(o){const[u,g]=o.size;t.value=N(u,g),e.value="ready",r.value=o.mines,a.value.reset()}function s(o,u){t.value=te(o,u),e.value="gaming",a.value.init()}return{board:t,setBoard:d,status:e,setStatus:n,timer:a,flags:r,setFlags:l,resetGame:i,startGame:s}}),oe=r=>{let t=!0;return r.forEach(e=>{e.filter(n=>n.value>-1).forEach(n=>{n.isOpen===!1&&(t=!1)})}),t},se=(r,t,e)=>{F(e).forEach(n=>{const[l,d]=n;l>=0&&l<t[0]&&d>=0&&d<t[1]&&H(r,t,n)})},H=(r,t,e)=>{const a=r.board[e[0]][e[1]];a.status=null,a.value===0&&a.isOpen===!1&&(a.isOpen=!0,se(r,t,e),r.setBoard(r.board)),a.isOpen=!0},ae={key:0,class:"board"},ne=["onClick","onMousemove"],re={key:0,src:E,alt:"Flag Icon",class:"field-icon"},ie={key:1,src:Z,alt:"Question Icon",class:"field-icon"},le={key:1,class:"board"},ue=["onClick","onMousemove"],de=y({__name:"GameBoard",props:{onFieldMouseMove:{type:Function}},setup(r){const t=M(),e=x(),a=O();function n(l,d){if(!(!a.gameSettings||e.status==="lose")){if(e.status==="ready"&&(a.setCurrentResult(null),e.startGame(a.gameSettings,d)),l.value===-1){e.setStatus("lose"),e.timer.stop();return}l.isOpen!==!0&&(H(e,a.gameSettings.size,d),oe(e.board)===!0&&(e.setStatus("win"),e.timer.stop()))}}return G(()=>{a.gameSettings||t.push({name:"index"})}),(l,d)=>f(e).status!=="ready"?(c(),m("div",ae,[(c(!0),m(k,null,b(f(e).board,(i,s)=>(c(),m("div",{key:s,class:"board-row"},[(c(!0),m(k,null,b(i,(o,u)=>(c(),m("div",{key:u,class:P(`field border border-dark field-color-${o.value} ${o.isOpen?"bg-light":"bg-secondary"}`),onClick:()=>n(o,[s,u]),onMousemove:()=>l.onFieldMouseMove(o)},[_(h(f(e).status==="lose"&&o.value===-1?"*":"")+" "+h(o.isOpen&&o.value!==0?o.value:"")+" ",1),o.status==="flag"&&f(e).status!=="lose"?(c(),m("img",re)):w("",!0),o.status==="question"&&f(e).status!=="lose"?(c(),m("img",ie)):w("",!0)],42,ne))),128))]))),128))])):(c(),m("div",le,[(c(!0),m(k,null,b(f(e).board,(i,s)=>(c(),m("div",{key:s,class:"board-row"},[(c(!0),m(k,null,b(i,(o,u)=>(c(),m("div",{key:u,class:"field border border-dark bg-secondary",onClick:()=>n(o,[s,u]),onMousemove:()=>l.onFieldMouseMove(o)},null,40,ue))),128))]))),128))]))}}),ce=V(de,[["__scopeId","data-v-8c42474a"]]),fe=y({name:"ConditionalWrapper",inheritAttrs:!1,slots:Object,props:{tag:{type:String,default:"div"},skip:{type:Boolean,required:!0}},setup(r,{slots:t,attrs:e}){return()=>{var a,n;return r.skip?(a=t.default)==null?void 0:a.call(t,{}):z(r.tag,{...e},[(n=t.default)==null?void 0:n.call(t,{})])}}}),me=y({__name:"BBadge",props:{dotIndicator:{type:Boolean,default:!1},pill:{type:Boolean,default:!1},placement:{default:void 0},tag:{default:"span"},active:{type:Boolean,default:void 0},activeClass:{default:void 0},disabled:{type:Boolean,default:void 0},exactActiveClass:{default:void 0},href:{default:void 0},icon:{type:Boolean,default:void 0},noRel:{type:Boolean},opacity:{default:void 0},opacityHover:{default:void 0},prefetch:{type:Boolean},prefetchOn:{},noPrefetch:{type:Boolean},prefetchedClass:{},rel:{default:void 0},replace:{type:Boolean,default:void 0},routerComponentName:{default:void 0},stretched:{type:Boolean,default:!1},target:{default:void 0},to:{default:void 0},underlineOffset:{default:void 0},underlineOffsetHover:{default:void 0},underlineOpacity:{default:void 0},underlineOpacityHover:{default:void 0},underlineVariant:{default:void 0},variant:{default:"secondary"},bgVariant:{default:null},textVariant:{default:null}},setup(r){const e=T(r,"BBadge"),{computedLink:a,computedLinkProps:n}=Q(e,["active","activeClass","append","disabled","href","rel","replace","routerComponentName","target","to","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover","icon"]),l=B(()=>a.value?U:e.tag),d=B(()=>{const o=e.placement??(e.dotIndicator?"top-end":void 0);return["position-absolute","translate-middle",{"start-0 top-0":o==="top-start","start-0 top-50":o==="start","start-0 top-100":o==="bottom-start","start-50 top-0":o==="top","start-50 top-100":o==="bottom","start-100 top-0":o==="top-end","start-100 top-50":o==="end","start-100 top-100":o==="bottom-end"}]}),i=K(e),s=B(()=>[i.value,e.placement!==void 0||e.dotIndicator===!0?d.value:void 0,{active:e.active,disabled:e.disabled,"rounded-pill":e.pill,"p-2 border border-light rounded-circle":e.dotIndicator,"text-decoration-none":a.value}]);return(o,u)=>(c(),$(J(l.value),I({class:["badge",s.value]},f(n)),{default:p(()=>[v(fe,I({skip:f(e).dotIndicator!==!0,tag:"span"},f(e).dotIndicator?{class:"visually-hidden"}:{}),{default:p(()=>[j(o.$slots,"default")]),_:3},16,["skip"])]),_:3},16,["class"]))}}),pe={class:"d-flex flex-column align-items-center",ref:"gameBoardElementRef"},ve={class:"text-light"},ge=y({__name:"GameMenu",setup(r){const t=x(),e=O(),a=M();function n(){e.gameSettings&&(t.resetGame(e.gameSettings),a.push({name:"index"}))}function l(){e.gameSettings&&(e.setCurrentResult({id:Date.now(),time:t.timer.value,nickname:null}),t.resetGame(e.gameSettings),a.push({name:"results"}))}function d(){e.gameSettings&&t.resetGame(e.gameSettings)}return(i,s)=>{const o=W,u=me;return c(),m("div",pe,[S("h2",ve,h(f(t).status==="win"?"You win! Your result: ":"")+" "+h(f(t).status==="lose"?"You lost":f(X)(f(t).timer.value)),1),f(t).status==="win"?(c(),$(o,{key:0,onClick:l},{default:p(()=>s[0]||(s[0]=[_("Save Result")])),_:1})):w("",!0),S("div",null,[v(o,{onClick:d,class:"button m-2"},{default:p(()=>s[1]||(s[1]=[_(" Play Again ")])),_:1}),v(o,{onClick:n,class:"button m-2"},{default:p(()=>s[2]||(s[2]=[_("Back to Settings")])),_:1})]),v(u,{class:"d-flex align-items-center m-2"},{default:p(()=>[s[3]||(s[3]=S("img",{src:E,alt:"Flag Icon"},null,-1)),_(": "+h(f(t).flags),1)]),_:1})],512)}}}),_e={class:"container d-flex flex-column align-items-center bg-dark p-4"},he=y({__name:"game",setup(r){const t=M(),e=x(),a=O();let n=null;function l(s){n=s}function d(s){if(s.status===null&&e.flags>0){s.status="flag",e.setFlags(e.flags-1);return}if(s.status===null){s.status="question";return}if(s.status==="flag"){s.status="question",e.setFlags(e.flags+1);return}s.status==="question"&&(s.status=null)}function i(s){s.preventDefault(),n!==null&&n.isOpen===!1&&e.status==="gaming"&&d(n)}return a.gameSettings?e.resetGame(a.gameSettings):t.push({name:"index"}),G(()=>{document.body.addEventListener("contextmenu",i)}),Y(()=>{document.body.removeEventListener("contextmenu",i)}),(s,o)=>(c(),m("div",_e,[v(ge),v(ce,{onFieldMouseMove:l})]))}}),be=V(he,[["__scopeId","data-v-c58a277c"]]);export{be as default};
